<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Dashboard</title>
<style>
/* basic reset */
body,html { margin:0; padding:0; font-family:sans-serif; background:#0b0b0b; color:#eee; overflow-x:hidden; }
a { text-decoration:none; color:#eee; }

/* side menu */
#sidemenu { position:fixed; left:0; top:0; height:100%; width:60px; background:#111; transition:width 0.3s; overflow:hidden; z-index:1000; }
#sidemenu:hover { width:200px; }
.menu-item { padding:20px; display:flex; align-items:center; cursor:pointer; transition:background 0.2s; }
.menu-item:hover { background:#222; }
.menu-item span { margin-left:10px; white-space:nowrap; opacity:0; transition:opacity 0.3s; }
#sidemenu:hover .menu-item span { opacity:1; }

/* main content */
#main { margin-left:60px; transition:margin-left 0.3s; padding:20px; }
#sidemenu:hover ~ #main { margin-left:200px; }

/* cards */
.card-container { display:flex; gap:20px; flex-wrap:wrap; margin-bottom:20px; }
.card { background:#222; padding:15px 20px; border-radius:8px; min-width:120px; text-align:center; box-shadow:0 0 10px #000; transition:transform 0.2s; }
.card:hover { transform:scale(1.05); }
.card h2 { margin:0; color:#4caf50; }
.card p { margin:5px 0 0; color:#ccc; }

/* controls */
.controls { max-width:600px; margin-bottom:20px; display:flex; gap:10px; flex-wrap:wrap; }
.controls input, .controls select { flex:1; padding:10px; background:#222; border:none; color:#eee; border-radius:5px; }

/* student list */
#dbList, #results { max-width:600px; margin:0 auto; }
.row { padding:10px; border-bottom:1px solid #333; cursor:pointer; display:flex; justify-content:space-between; background:#111; border-radius:5px; margin-bottom:5px; transition:background 0.2s; }
.row:hover { background:#222; }

/* drawer */
#overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:#000c; display:none; z-index:2000; }
#overlay.active { display:block; }
#drawer { position:fixed; right:0; top:0; width:350px; height:100%; background:#111; padding:20px; display:none; overflow:auto; box-shadow:-5px 0 20px #000; z-index:2100; }
#drawer.active { display:block; }
#d_photo { width:100%; display:block; margin-bottom:10px; border-radius:5px; }

/* stats bars */
.stat-bar { height:20px; background:#333; border-radius:10px; overflow:hidden; margin:5px 0; }
.stat-fill { height:100%; background:#4caf50; text-align:right; padding-right:5px; box-sizing:border-box; color:#000; font-weight:bold; }
</style>
</head>
<body>

<div id="sidemenu">
  <div class="menu-item" data-tab="dashboard"><span>Dashboard</span>üè†</div>
  <div class="menu-item" data-tab="statistics"><span>Statistics</span>üìä</div>
  <div class="menu-item" data-tab="students"><span>Student List</span>üßë‚Äçüéì</div>
</div>

<div id="main">
  <div id="dashboard" class="tab-content">
    <h1>Dashboard</h1>
    <div class="card-container">
      <div class="card"><h2 id="total">0</h2><p>Total Students</p></div>
      <div class="card"><h2 id="grade7">0</h2><p>Grade 7</p></div>
      <div class="card"><h2 id="grade8">0</h2><p>Grade 8</p></div>
    </div>
  </div>

  <div id="statistics" class="tab-content" style="display:none;">
    <h1>Statistics</h1>
    <div id="statContent"></div>
  </div>

  <div id="students" class="tab-content" style="display:none;">
    <div class="controls">
      <input id="query" placeholder="Search by name...">
      <select id="gradeFilter">
        <option value="all">All Grades</option>
        <option value="7">Grade 7</option>
        <option value="8">Grade 8</option>
      </select>
    </div>
    <div id="results"></div>
    <div id="dbList"></div>
  </div>
</div>

<div id="overlay"></div>
<div id="drawer">
  <img id="d_photo">
  <p>Name: <span id="d_name"></span></p>
  <p>ID: <span id="d_id"></span></p>
  <p>Status: <span id="d_status"></span></p>
  <p>Grade: <span id="d_grade"></span></p>
  <p>Guardian: <span id="d_guardian"></span></p>
  <p>Address: <span id="d_address"></span></p>
  <p>School: <span id="d_school"></span></p>
  <p>Notes: <span id="d_notes"></span></p>
  <p>Email: <span id="d_email"></span></p>
  <p>Password: <span id="d_pass"></span></p>
  <button id="close">Close</button>
</div>

<script>
const students = [
  { name:'Thomas J. Graham', id:'56254', grade:'8', guardian:'Gerald Graham / Denise Schellenger', address:'27 Erial Rd Blackwood, NJ 08012', school:'CWL', notes:'no additional flags', status:'active', hasPhoto:true },
  { name:'Lucas Johnson', id:'54698', grade:'8', guardian:'Bryan Johnson / Lisa Johnson', address:'108 West Ct Blackwood, NJ 08012', school:'CWL', notes:'no additional flags', status:'active', hasPhoto:true },
  { name:'Ezra J. Cook', id:'56431', grade:'8', guardian:'LaShaya Ford', address:'502 Harbor Ln Sicklerville, NJ 08081', school:'CWL', notes:'Football Team', status:'active', hasPhoto:false },
  { name:'Kinsley Alex Boguszewski', id:'56847', grade:'7', guardian:'Daniel & Dana Boguszewski', address:'1081 Kearsley Rd Sicklerville, NJ 08081', school:'Ann Mullen', notes:'', status:'active', hasPhoto:false },
  { name:'Giuliana G McDade', id:'56903', grade:'8', guardian:'Jermain & Melissa McDade', address:'3 Mulberry St Sicklerville, NJ 08081', school:'Ann Mullen', notes:'', status:'active', hasPhoto:false },
  { name:'Dominic Tarantino', id:'56121', grade:'8', guardian:'Francis & Deborah Tarantino', address:'319 Dearborne Ave Blackwood, NJ 08012', school:'CWL', notes:'', status:'active', hasPhoto:false },
  { name:'Chase Towers', id:'56365', grade:'8', guardian:'Gary Towers & Kathleen Macaro', address:'32 Annapolis Dr Sicklerville, NJ 08081', school:'Ann Mullen', notes:'', status:'active', hasPhoto:false },
  { name:'Evelyn Zechman', id:'56366', grade:'8', guardian:'Michael & Janae Zechman', address:'1 Blue Spruce Dr Sicklerville, NJ 08081', school:'Ann Mullen', notes:'', status:'active', hasPhoto:false },
  { name:'Alyssa McDonel', id:'56641', grade:'7', guardian:'Robert & Bernadette McDonel', address:'29 Brewer Ave Apt 1 Blackwood, NJ 08012', school:'Glenn Landing', notes:'', status:'active', hasPhoto:false }
];

const q = document.getElementById('query');
const results = document.getElementById('results');
const dbList = document.getElementById('dbList');
const overlay = document.getElementById('overlay');
const drawer = document.getElementById('drawer');
const photoEl = document.getElementById('d_photo');
const gradeFilter = document.getElementById('gradeFilter');

function mask(s){
  if(s.hasPhoto) return s;
  return {...s, id:'*******', guardian:'*******', address:'*******', notes:'*******', status:'*******', email:'*******', password:'*******'};
}

function emailFor(name){
  return `${name.toLowerCase().split(' ').slice(-1)[0]}.${name.toLowerCase().split(' ')[0]}@gloucestertownshipschools.org`;
}

function openDrawer(s){
  const student = mask(s);
  document.getElementById('d_name').textContent = student.name;
  document.getElementById('d_id').textContent = student.id;
  document.getElementById('d_status').textContent = student.status;
  document.getElementById('d_grade').textContent = student.grade;
  document.getElementById('d_guardian').textContent = student.guardian;
  document.getElementById('d_address').textContent = student.address;
  document.getElementById('d_school').textContent = student.school;
  document.getElementById('d_notes').textContent = student.notes;
  document.getElementById('d_email').textContent = student.hasPhoto ? emailFor(student.name) : '*******';
  document.getElementById('d_pass').textContent = student.hasPhoto ? `Password: GTps${student.id}` : '*******';

  if(student.hasPhoto){
    photoEl.src = `${student.id}.jpg`;
    photoEl.onerror = () => { photoEl.src = ''; };
    photoEl.style.display = 'block';
  } else {
    photoEl.style.display = 'none';
  }

  overlay.classList.add('active');
  drawer.classList.add('active');
}

function closeDrawer(){
  overlay.classList.remove('active');
  drawer.classList.remove('active');
}

function makeRow(s){
  const student = mask(s);
  const row = document.createElement('div');
  row.className = 'row';
  row.innerHTML = `<span>${student.name}</span><span class="tag">${student.hasPhoto ? student.id : '*******'}</span>`;
  row.onclick = () => openDrawer(s);
  return row;
}

function renderDB(){
  dbList.innerHTML = '';
  let list = students;
  if(gradeFilter.value !== 'all') list = list.filter(s => s.grade === gradeFilter.value);
  list.forEach(s => dbList.appendChild(makeRow(s)));
  renderStats(list);
}

function renderSearch(){
  const v = (q.value || '').toLowerCase().trim();
  results.innerHTML = '';
  let list = students;
  if(gradeFilter.value !== 'all') list = list.filter(s => s.grade === gradeFilter.value);
  if(!v) return;
  const hits = list.filter(s => s.name.toLowerCase().includes(v));
  if(!hits.length){
    results.innerHTML = '<div class="row"><span>no match</span></div>';
    return;
  }
  hits.forEach(s => results.appendChild(makeRow(s));
}

function renderStats(list){
  // update cards
  document.getElementById('total').textContent = students.length;
  document.getElementById('grade7').textContent = students.filter(s=>s.grade==='7').length;
  document.getElementById('grade8').textContent = students.filter(s=>s.grade==='8').length;

  // render bar stats
  const total = students.length;
  const grade7Count = students.filter(s=>s.grade==='7').length;
  const grade8Count = students.filter(s=>s.grade==='8').length;
  document.getElementById('statContent').innerHTML = `
    <p>Grade 7: ${grade7Count} (${((grade7Count/total)*100).toFixed(1)}%)</p>
    <div class="stat-bar"><div class="stat-fill" style="width:${(grade7Count/total)*100}%"></div></div>
    <p>Grade 8: ${grade8Count} (${((grade8Count/total)*100).toFixed(1)}%)</p>
    <div class="stat-bar"><div class="stat-fill" style="width:${(grade8Count/total)*100}%"></div></div>
  `;
}

// side menu tab switching
document.querySelectorAll('.menu-item').forEach(item=>{
  item.onclick = ()=>{
    document.querySelectorAll('.tab-content').forEach(t=>t.style.display='none');
    document.getElementById(item.dataset.tab).style.display='block';
  };
});

q.addEventListener('input', renderSearch);
gradeFilter.addEventListener('change', renderDB);
renderDB();

overlay.onclick = closeDrawer;
document.getElementById('close').onclick = closeDrawer;
</script>

</body>
</html>
